@page "/account/performlogout"
@using Microsoft.Extensions.Logging
@inject Leagify.AuctionDrafter.Client.Services.IAuthService AuthService
@inject NavigationManager NavigationManager
@inject ILogger<PerformLogout> Logger

<p>Logging out...</p>

@code {
    protected override async Task OnInitializedAsync()
    {
        Logger.LogInformation("PerformLogout: Initialized. Attempting to logout via AuthService.");
        var result = await AuthService.LogoutAsync();

        if (result.IsSuccess)
        {
            Logger.LogInformation("PerformLogout: AuthService.LogoutAsync reported success. Navigating to home.");
        }
        else
        {
            Logger.LogWarning("PerformLogout: AuthService.LogoutAsync reported failure: {Message}. Navigating to home anyway.", result.Message);
        }

        await Task.Delay(100); // Small delay to allow UI to process state change
        NavigationManager.NavigateTo("/"); // Removed forceLoad: true
    }
}
